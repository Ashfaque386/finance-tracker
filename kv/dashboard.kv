#:kivy 2.0

<DashboardScreen>:
    name: 'dashboard'
    
    MDBoxLayout:
        orientation: 'vertical'
        md_bg_color: app.theme_cls.bg_normal
        
        # Top Bar
        MDTopAppBar:
            title: "Money Manager"
            md_bg_color: app.theme_cls.primary_color
            specific_text_color: 1, 1, 1, 1
            left_action_items: [["menu", lambda x: nav_drawer.set_state("toggle")]]
            right_action_items: [["bell-outline", lambda x: root.show_notifications()], ["cog-outline", lambda x: root.go_to_settings()]]
        
        # Main Content
        ScrollView:
            MDBoxLayout:
                orientation: 'vertical'
                padding: dp(16)
                spacing: dp(16)
                size_hint_y: None
                height: self.minimum_height
                
                # Summary Cards Row
                MDBoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: dp(120)
                    spacing: dp(12)
                    
                    # Total Balance Card
                    MDCard:
                        size_hint_x: 0.5
                        elevation: 2
                        padding: dp(16)
                        md_bg_color: app.theme_cls.primary_color
                        
                        MDBoxLayout:
                            orientation: 'vertical'
                            
                            MDLabel:
                                text: "Total Balance"
                                font_style: "Caption"
                                size_hint_y: 0.3
                                theme_text_color: "Custom"
                                text_color: 1, 1, 1, 0.8
                            
                            MDLabel:
                                id: total_balance_label
                                text: "$0.00"
                                font_style: "H4"
                                bold: True
                                size_hint_y: 0.7
                                theme_text_color: "Custom"
                                text_color: 1, 1, 1, 1
                    
                    # Income/Expense Card
                    MDCard:
                        size_hint_x: 0.5
                        elevation: 2
                        padding: dp(16)
                        
                        MDBoxLayout:
                            orientation: 'vertical'
                            spacing: dp(4)
                            
                            MDBoxLayout:
                                size_hint_y: 0.5
                                
                                MDIcon:
                                    icon: "arrow-down"
                                    theme_text_color: "Custom"
                                    text_color: 0.3, 0.7, 0.3, 1
                                    size_hint_x: 0.2
                                
                                MDBoxLayout:
                                    orientation: 'vertical'
                                    
                                    MDLabel:
                                        text: "Income"
                                        font_style: "Caption"
                                        size_hint_y: 0.4
                                    
                                    MDLabel:
                                        id: income_label
                                        text: "$0.00"
                                        font_style: "H6"
                                        bold: True
                                        theme_text_color: "Custom"
                                        text_color: 0.3, 0.7, 0.3, 1
                                        size_hint_y: 0.6
                            
                            MDBoxLayout:
                                size_hint_y: 0.5
                                
                                MDIcon:
                                    icon: "arrow-up"
                                    theme_text_color: "Custom"
                                    text_color: 0.9, 0.2, 0.2, 1
                                    size_hint_x: 0.2
                                
                                MDBoxLayout:
                                    orientation: 'vertical'
                                    
                                    MDLabel:
                                        text: "Expense"
                                        font_style: "Caption"
                                        size_hint_y: 0.4
                                    
                                    MDLabel:
                                        id: expense_label
                                        text: "$0.00"
                                        font_style: "H6"
                                        bold: True
                                        theme_text_color: "Custom"
                                        text_color: 0.9, 0.2, 0.2, 1
                                        size_hint_y: 0.6
                
                # Quick Actions
                MDLabel:
                    text: "Quick Actions"
                    font_style: "H6"
                    bold: True
                    size_hint_y: None
                    height: dp(30)
                
                MDBoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: dp(60)
                    spacing: dp(12)
                    
                    MDRaisedButton:
                        text: "Add Expense"
                        icon: "minus-circle"
                        size_hint_x: 0.33
                        md_bg_color: 0.96, 0.26, 0.21, 1
                        on_release: root.add_transaction('Expense')
                    
                    MDRaisedButton:
                        text: "Add Income"
                        icon: "plus-circle"
                        size_hint_x: 0.33
                        md_bg_color: 0.30, 0.69, 0.31, 1
                        on_release: root.add_transaction('Income')
                    
                    MDRaisedButton:
                        text: "Transfer"
                        icon: "swap-horizontal"
                        size_hint_x: 0.34
                        on_release: root.add_transaction('Transfer')
                
                # Recent Transactions
                MDLabel:
                    text: "Recent Transactions"
                    font_style: "H6"
                    bold: True
                    size_hint_y: None
                    height: dp(30)
                
                MDCard:
                    size_hint_y: None
                    height: dp(300)
                    elevation: 2
                    padding: dp(8)
                    
                    ScrollView:
                        MDList:
                            id: recent_transactions_list
                
                # Charts Section
                MDLabel:
                    text: "This Month Overview"
                    font_style: "H6"
                    bold: True
                    size_hint_y: None
                    height: dp(30)
                
                MDCard:
                    size_hint_y: None
                    height: dp(300)
                    elevation: 2
                    padding: dp(16)
                    
                    FitImage:
                        id: dashboard_chart
                        source: ""
                        size_hint: 1, 1
        
        # Bottom Navigation
        MDBottomNavigation:
            id: bottom_nav
            panel_color: app.theme_cls.primary_color
            text_color_active: 1, 1, 1, 1
            text_color_normal: 1, 1, 1, 0.5
            
            MDBottomNavigationItem:
                name: 'dashboard'
                text: 'Dashboard'
                icon: 'view-dashboard'
                on_tab_press: setattr(root.manager, 'current', 'dashboard')
            
            MDBottomNavigationItem:
                name: 'transactions'
                text: 'Transactions'
                icon: 'format-list-bulleted'
                on_tab_press: setattr(root.manager, 'current', 'transactions')
            
            MDBottomNavigationItem:
                name: 'reports'
                text: 'Reports'
                icon: 'chart-box'
                on_tab_press: setattr(root.manager, 'current', 'reports')
            
            MDBottomNavigationItem:
                name: 'accounts'
                text: 'Accounts'
                icon: 'wallet'
                on_tab_press: setattr(root.manager, 'current', 'accounts')
            
            MDBottomNavigationItem:
                name: 'more'
                text: 'More'
                icon: 'dots-horizontal'
                on_tab_press: root.show_more_menu()

